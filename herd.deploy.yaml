defaults:
    region: ap-southeast-2

deployments:
    - name: Unicorn dev
      stack_name: unicorn-dev-fuzzer
      authentication:
          type: profile
          profile: unicorn-pipeline-dev
      template_file: sync://child.template.yaml
      template_parameters: child/params.yaml
      sync:
          bucket: unicorn-staging
          base_key: herd/test1/
          resources:
            - child/child.template.yaml
      tags:
        - Key: Project
          Value: Unicorn
        - Key: Iteration
          Value: 1.2

    - name: Unicorn prod
      stack_name: unicorn-prod-fuzzer
      authentication:
          type: profile
          profile: unicorn-pipeline-prod
      template_file: sync://child.template.yaml
      template_parameters: child/params.yaml
      sync:
          bucket: unicorn-staging
          base_key: herd/test1/
          resources:
            - child/child.template.yaml
      tags:
        - Key: Project
          Value: Unicorn
        - Key: Iteration
          Value: 1.2

    - name: Unicorn Tooling
      stack_name: unicorn-tooling-fuzzer
      authentication:
          type: profile
          profile: unicorn-pipeline-master
      template_file: sync://full-stack.template.yaml
      template_parameters: stack/params.yaml
      sync:
          bucket: unicorn-staging
          base_key: herd/test1/
          resources:
            - stack/account.template.yaml
            - stack/cross-account.template.yaml
            - stack/full-stack.template.yaml
            - stack/lambda.template.yaml
            - stack/pipeline.template.yaml
            - stack/project.template.yaml
            - stack/deployment.zip
      tags:
          - Key: Project
            Value: Unicorn
          - Key: Iteration
            Value: 1.2

